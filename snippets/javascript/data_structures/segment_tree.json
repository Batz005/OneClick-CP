{
    "Segment Tree": {
        "prefix": "segtree",
        "body": [
            "class SegmentTree {",
            "    constructor(data) {",
            "        this.n = data.length;",
            "        this.tree = new Array(4 * this.n).fill(0);",
            "        this._build(data, 1, 0, this.n - 1);",
            "    }",
            "",
            "    _build(data, node, start, end) {",
            "        if (start === end) {",
            "            this.tree[node] = data[start];",
            "        } else {",
            "            const mid = Math.floor((start + end) / 2);",
            "            this._build(data, 2 * node, start, mid);",
            "            this._build(data, 2 * node + 1, mid + 1, end);",
            "            this.tree[node] = this.tree[2 * node] + this.tree[2 * node + 1];",
            "        }",
            "    }",
            "",
            "    update(idx, val) {",
            "        this._update(1, 0, this.n - 1, idx, val);",
            "    }",
            "",
            "    _update(node, start, end, idx, val) {",
            "        if (start === end) {",
            "            this.tree[node] = val;",
            "        } else {",
            "            const mid = Math.floor((start + end) / 2);",
            "            if (start <= idx && idx <= mid) {",
            "                this._update(2 * node, start, mid, idx, val);",
            "            } else {",
            "                this._update(2 * node + 1, mid + 1, end, idx, val);",
            "            }",
            "            this.tree[node] = this.tree[2 * node] + this.tree[2 * node + 1];",
            "        }",
            "    }",
            "",
            "    query(l, r) {",
            "        return this._query(1, 0, this.n - 1, l, r);",
            "    }",
            "",
            "    _query(node, start, end, l, r) {",
            "        if (r < start || end < l) return 0;",
            "        if (l <= start && end <= r) return this.tree[node];",
            "        const mid = Math.floor((start + end) / 2);",
            "        return this._query(2 * node, start, mid, l, r) + this._query(2 * node + 1, mid + 1, end, l, r);",
            "    }",
            "}"
        ],
        "description": "Segment Tree (Sum Query)"
    }
}
